---
title: 快速入门
description: 几分钟内开始使用 Developerworks Unity SDK
---

# 快速入门指南

本指南将帮助您快速开始使用 Developerworks Unity SDK。按照以下步骤创建您的第一个集成。

## 前提条件

开始之前，确保您已经：

- 完成了[安装](/docs/installation)过程
- 设置了您的 API 凭证
- 准备好一个 Unity 项目

## 步骤 1：初始化 SDK

首先，在主游戏场景中初始化 SDK：

```csharp
using UnityEngine;
using Developerworks.SDK;

public class GameManager : MonoBehaviour
{
    void Start()
    {
        // 初始化 SDK
        DeveloperworksSDK.Initialize(new SDKConfig
        {
            ApiKey = "your-api-key",
            ApiSecret = "your-api-secret",
            Environment = SDKEnvironment.Production
        });

        Debug.Log("SDK 初始化成功！");
    }
}
```

<Callout type="info">
  对于生产应用，请从安全配置文件加载凭证，而不是硬编码它们。
</Callout>

## 步骤 2：验证用户

设置用户身份验证：

```csharp
using Developerworks.SDK.Auth;

public class AuthManager : MonoBehaviour
{
    async void AuthenticateUser()
    {
        try
        {
            // 使用用户名和密码进行身份验证
            var result = await DeveloperworksAuth.SignIn(
                username: "user@example.com",
                password: "secure-password"
            );

            if (result.Success)
            {
                Debug.Log($"欢迎，{result.User.DisplayName}！");
                OnAuthenticationSuccess(result.User);
            }
            else
            {
                Debug.LogError($"身份验证失败：{result.Error}");
            }
        }
        catch (System.Exception ex)
        {
            Debug.LogError($"身份验证错误：{ex.Message}");
        }
    }

    void OnAuthenticationSuccess(User user)
    {
        // 处理成功的身份验证
        // 例如，加载用户资料、导航到主菜单等
    }
}
```

## 步骤 3：进行首次 API 调用

通过身份验证后，您可以开始进行 API 调用：

```csharp
using Developerworks.SDK.API;

public class DataManager : MonoBehaviour
{
    async void FetchUserData()
    {
        try
        {
            // 获取当前用户的数据
            var userData = await DeveloperworksAPI.GetUserData();

            Debug.Log($"用户等级：{userData.Level}");
            Debug.Log($"总积分：{userData.Points}");

            // 更新用户数据
            await DeveloperworksAPI.UpdateUserData(new UserDataUpdate
            {
                Level = userData.Level + 1,
                Points = userData.Points + 100
            });

            Debug.Log("用户数据更新成功！");
        }
        catch (APIException ex)
        {
            Debug.LogError($"API 错误：{ex.Message}");
        }
    }
}
```

## 步骤 4：处理事件

订阅 SDK 事件以响应重要的变化：

```csharp
public class EventHandler : MonoBehaviour
{
    void OnEnable()
    {
        // 订阅事件
        DeveloperworksSDK.OnConnectionStateChanged += OnConnectionChanged;
        DeveloperworksSDK.OnDataSynced += OnDataSynced;
        DeveloperworksAuth.OnAuthStateChanged += OnAuthChanged;
    }

    void OnDisable()
    {
        // 取消订阅事件
        DeveloperworksSDK.OnConnectionStateChanged -= OnConnectionChanged;
        DeveloperworksSDK.OnDataSynced -= OnDataSynced;
        DeveloperworksAuth.OnAuthStateChanged -= OnAuthChanged;
    }

    void OnConnectionChanged(ConnectionState state)
    {
        Debug.Log($"连接状态：{state}");
    }

    void OnDataSynced()
    {
        Debug.Log("数据已与服务器同步");
    }

    void OnAuthChanged(AuthState state)
    {
        if (state == AuthState.SignedOut)
        {
            Debug.Log("用户已登出");
            // 处理登出（例如，返回登录界面）
        }
    }
}
```

## 完整示例

这里是一个完整的示例，将所有内容整合在一起：

```csharp
using UnityEngine;
using Developerworks.SDK;
using Developerworks.SDK.Auth;
using Developerworks.SDK.API;

public class CompleteExample : MonoBehaviour
{
    void Start()
    {
        InitializeAndAuthenticate();
    }

    async void InitializeAndAuthenticate()
    {
        // 1. 初始化 SDK
        DeveloperworksSDK.Initialize(new SDKConfig
        {
            ApiKey = LoadApiKey(),
            ApiSecret = LoadApiSecret(),
            Environment = SDKEnvironment.Production
        });

        // 2. 订阅事件
        DeveloperworksAuth.OnAuthStateChanged += OnAuthStateChanged;

        // 3. 验证用户
        var authResult = await DeveloperworksAuth.SignIn(
            username: "user@example.com",
            password: "secure-password"
        );

        if (authResult.Success)
        {
            // 4. 获取用户数据
            var userData = await DeveloperworksAPI.GetUserData();
            Debug.Log($"欢迎回来，{userData.DisplayName}！");
        }
    }

    void OnAuthStateChanged(AuthState state)
    {
        Debug.Log($"身份验证状态已更改为：{state}");
    }

    string LoadApiKey()
    {
        // 从安全存储加载
        return PlayerPrefs.GetString("ApiKey");
    }

    string LoadApiSecret()
    {
        // 从安全存储加载
        return PlayerPrefs.GetString("ApiSecret");
    }

    void OnDestroy()
    {
        // 清理
        DeveloperworksAuth.OnAuthStateChanged -= OnAuthStateChanged;
    }
}
```

## 最佳实践

在使用 SDK 构建时，请记住以下最佳实践：

- **安全性**：切勿在脚本中硬编码 API 凭证
- **错误处理**：对异步操作始终使用 try-catch 块
- **事件管理**：记得取消订阅事件以防止内存泄漏
- **异步/等待**：对所有 SDK API 调用使用 async/await
- **测试**：在编辑器和构建环境中测试身份验证和 API 调用

## 下一步

现在您已完成快速入门，探索更多高级功能：

<Cards>
  <Card
    title="身份验证"
    description="了解高级身份验证功能"
    href="/docs/authentication"
  />
  <Card
    title="API 参考"
    description="浏览完整的 API 文档"
    href="/docs/api-reference"
  />
</Cards>

## 常见问题

### "SDK 未初始化"错误

确保在任何其他 SDK 方法之前调用 `DeveloperworksSDK.Initialize()`。

### 身份验证失败

- 验证您的 API 凭证是否正确
- 检查您的互联网连接
- 确保用户的凭证有效

### API 调用超时

- 检查您的网络连接
- 验证 API 端点是否可访问
- 检查您的防火墙设置

如需更多帮助，请查阅 [API 参考](/docs/api-reference)或联系支持。
