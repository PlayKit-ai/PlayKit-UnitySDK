---
title: Authentication
description: Learn how to implement secure authentication in your Unity project
---

# Authentication

The Developerworks Unity SDK provides a comprehensive authentication system that supports multiple authentication methods and secure user management.

## Overview

Authentication is a crucial part of any application. The SDK offers:

- **Multiple Auth Methods**: Email/password, social login, anonymous auth
- **Secure Token Management**: Automatic token refresh and secure storage
- **Session Persistence**: Maintain user sessions across app launches
- **Event-Driven**: React to authentication state changes

## Sign In Methods

### Email and Password

The most common authentication method:

```csharp
using Developerworks.SDK.Auth;

public class EmailAuthExample : MonoBehaviour
{
    public async void SignInWithEmail()
    {
        var result = await DeveloperworksAuth.SignIn(
            username: "user@example.com",
            password: "secure-password"
        );

        if (result.Success)
        {
            Debug.Log($"Signed in as: {result.User.Email}");
            // Navigate to main app
        }
        else
        {
            Debug.LogError($"Sign in failed: {result.Error.Message}");
            // Show error to user
        }
    }
}
```

### Anonymous Authentication

Allow users to use your app without creating an account:

```csharp
public async void SignInAnonymously()
{
    var result = await DeveloperworksAuth.SignInAnonymously();

    if (result.Success)
    {
        Debug.Log($"Anonymous user ID: {result.User.Id}");
    }
}
```

<Callout type="info">
  Anonymous users can later link their account to an email/password or social provider.
</Callout>

### Social Authentication

Support sign-in with popular social platforms:

```csharp
public async void SignInWithGoogle()
{
    var result = await DeveloperworksAuth.SignInWithProvider(
        AuthProvider.Google
    );

    if (result.Success)
    {
        Debug.Log($"Signed in with Google: {result.User.DisplayName}");
    }
}
```

Supported providers:
- Google
- Facebook
- Twitter
- Apple
- Discord

## User Registration

Create new user accounts:

```csharp
public class RegistrationManager : MonoBehaviour
{
    public async void RegisterUser(string email, string password, string displayName)
    {
        try
        {
            var result = await DeveloperworksAuth.CreateUser(new UserRegistration
            {
                Email = email,
                Password = password,
                DisplayName = displayName,
                AcceptedTerms = true
            });

            if (result.Success)
            {
                Debug.Log($"Account created for: {result.User.Email}");
                // Automatically signed in after registration
                OnRegistrationSuccess(result.User);
            }
            else
            {
                HandleRegistrationError(result.Error);
            }
        }
        catch (ValidationException ex)
        {
            Debug.LogError($"Validation error: {ex.Message}");
        }
    }

    void HandleRegistrationError(AuthError error)
    {
        switch (error.Code)
        {
            case AuthErrorCode.EmailAlreadyExists:
                Debug.LogError("This email is already registered");
                break;
            case AuthErrorCode.WeakPassword:
                Debug.LogError("Password is too weak");
                break;
            case AuthErrorCode.InvalidEmail:
                Debug.LogError("Invalid email format");
                break;
            default:
                Debug.LogError($"Registration failed: {error.Message}");
                break;
        }
    }

    void OnRegistrationSuccess(User user)
    {
        // Welcome the new user
        // Navigate to onboarding or main app
    }
}
```

## Password Management

### Reset Password

Allow users to reset forgotten passwords:

```csharp
public async void ResetPassword(string email)
{
    try
    {
        await DeveloperworksAuth.SendPasswordResetEmail(email);
        Debug.Log("Password reset email sent");
        // Show confirmation message to user
    }
    catch (AuthException ex)
    {
        Debug.LogError($"Failed to send reset email: {ex.Message}");
    }
}
```

### Change Password

For authenticated users to change their password:

```csharp
public async void ChangePassword(string currentPassword, string newPassword)
{
    try
    {
        await DeveloperworksAuth.ChangePassword(
            currentPassword: currentPassword,
            newPassword: newPassword
        );

        Debug.Log("Password changed successfully");
    }
    catch (AuthException ex)
    {
        if (ex.Code == AuthErrorCode.WrongPassword)
        {
            Debug.LogError("Current password is incorrect");
        }
        else
        {
            Debug.LogError($"Failed to change password: {ex.Message}");
        }
    }
}
```

## Session Management

### Check Authentication State

Check if a user is currently signed in:

```csharp
void CheckAuthState()
{
    if (DeveloperworksAuth.IsAuthenticated)
    {
        var currentUser = DeveloperworksAuth.CurrentUser;
        Debug.Log($"User is signed in: {currentUser.Email}");
    }
    else
    {
        Debug.Log("No user signed in");
    }
}
```

### Sign Out

Sign out the current user:

```csharp
public async void SignOut()
{
    try
    {
        await DeveloperworksAuth.SignOut();
        Debug.Log("User signed out");
        // Navigate to login screen
    }
    catch (Exception ex)
    {
        Debug.LogError($"Sign out error: {ex.Message}");
    }
}
```

### Session Persistence

Enable automatic session persistence:

```csharp
void Start()
{
    // Configure session persistence
    DeveloperworksAuth.Configure(new AuthConfig
    {
        PersistSession = true,
        SessionTimeout = TimeSpan.FromDays(30)
    });

    // Check for existing session
    if (DeveloperworksAuth.HasPersistedSession)
    {
        RestoreSession();
    }
}

async void RestoreSession()
{
    try
    {
        var result = await DeveloperworksAuth.RestoreSession();
        if (result.Success)
        {
            Debug.Log("Session restored");
            // Navigate to main app
        }
    }
    catch (Exception ex)
    {
        Debug.LogError($"Failed to restore session: {ex.Message}");
        // Navigate to login screen
    }
}
```

## Authentication Events

Listen for authentication state changes:

```csharp
public class AuthEventHandler : MonoBehaviour
{
    void OnEnable()
    {
        DeveloperworksAuth.OnAuthStateChanged += HandleAuthStateChanged;
        DeveloperworksAuth.OnTokenRefreshed += HandleTokenRefreshed;
        DeveloperworksAuth.OnSessionExpired += HandleSessionExpired;
    }

    void OnDisable()
    {
        DeveloperworksAuth.OnAuthStateChanged -= HandleAuthStateChanged;
        DeveloperworksAuth.OnTokenRefreshed -= HandleTokenRefreshed;
        DeveloperworksAuth.OnSessionExpired -= HandleSessionExpired;
    }

    void HandleAuthStateChanged(AuthState newState)
    {
        switch (newState)
        {
            case AuthState.SignedIn:
                Debug.Log("User signed in");
                // Navigate to main app
                break;
            case AuthState.SignedOut:
                Debug.Log("User signed out");
                // Navigate to login screen
                break;
            case AuthState.SessionExpired:
                Debug.Log("Session expired");
                // Prompt user to sign in again
                break;
        }
    }

    void HandleTokenRefreshed(string newToken)
    {
        Debug.Log("Auth token refreshed");
    }

    void HandleSessionExpired()
    {
        Debug.LogWarning("Session expired, please sign in again");
        // Show login dialog
    }
}
```

## User Profile

Access and update user profile information:

```csharp
public class UserProfileManager : MonoBehaviour
{
    void DisplayUserInfo()
    {
        var user = DeveloperworksAuth.CurrentUser;

        Debug.Log($"User ID: {user.Id}");
        Debug.Log($"Email: {user.Email}");
        Debug.Log($"Display Name: {user.DisplayName}");
        Debug.Log($"Created At: {user.CreatedAt}");
        Debug.Log($"Email Verified: {user.IsEmailVerified}");
    }

    public async void UpdateProfile(string newDisplayName, string photoUrl)
    {
        try
        {
            await DeveloperworksAuth.UpdateProfile(new ProfileUpdate
            {
                DisplayName = newDisplayName,
                PhotoUrl = photoUrl
            });

            Debug.Log("Profile updated successfully");
        }
        catch (Exception ex)
        {
            Debug.LogError($"Failed to update profile: {ex.Message}");
        }
    }

    public async void SendVerificationEmail()
    {
        try
        {
            await DeveloperworksAuth.SendEmailVerification();
            Debug.Log("Verification email sent");
        }
        catch (Exception ex)
        {
            Debug.LogError($"Failed to send verification email: {ex.Message}");
        }
    }
}
```

## Security Best Practices

When implementing authentication, follow these security best practices:

### 1. Secure Credential Storage

Never hardcode credentials:

```csharp
// ❌ Bad
string password = "my-password";

// ✅ Good
string password = SecureStorage.GetPassword();
```

### 2. Validate Input

Always validate user input before authentication:

```csharp
bool IsValidEmail(string email)
{
    return System.Text.RegularExpressions.Regex.IsMatch(
        email,
        @"^[^@\s]+@[^@\s]+\.[^@\s]+$"
    );
}

bool IsStrongPassword(string password)
{
    return password.Length >= 8 &&
           password.Any(char.IsUpper) &&
           password.Any(char.IsLower) &&
           password.Any(char.IsDigit);
}
```

### 3. Handle Errors Gracefully

Don't expose sensitive information in error messages:

```csharp
catch (AuthException ex)
{
    // ❌ Bad: Exposes sensitive information
    ShowError($"Login failed: {ex.InnerException.Message}");

    // ✅ Good: Generic user-friendly message
    ShowError("Login failed. Please check your credentials and try again.");

    // Log detailed error for debugging
    Debug.LogError($"Auth error details: {ex}");
}
```

### 4. Implement Rate Limiting

Protect against brute force attacks:

```csharp
private int loginAttempts = 0;
private DateTime lastAttempt;

public async void AttemptLogin(string email, string password)
{
    if (loginAttempts >= 5 && DateTime.Now - lastAttempt < TimeSpan.FromMinutes(5))
    {
        Debug.LogError("Too many login attempts. Please try again later.");
        return;
    }

    var result = await DeveloperworksAuth.SignIn(email, password);

    if (!result.Success)
    {
        loginAttempts++;
        lastAttempt = DateTime.Now;
    }
    else
    {
        loginAttempts = 0;
    }
}
```

## Testing Authentication

Test your authentication flow in the Unity Editor:

```csharp
#if UNITY_EDITOR
public class AuthTesting : MonoBehaviour
{
    [ContextMenu("Test Sign In")]
    async void TestSignIn()
    {
        var result = await DeveloperworksAuth.SignIn(
            "test@example.com",
            "test-password"
        );
        Debug.Log($"Test sign in: {result.Success}");
    }

    [ContextMenu("Test Sign Out")]
    async void TestSignOut()
    {
        await DeveloperworksAuth.SignOut();
        Debug.Log("Test sign out complete");
    }
}
#endif
```

## Next Steps

<Cards>
  <Card
    title="API Reference"
    description="Explore the complete authentication API"
    href="/docs/api-reference"
  />
  <Card
    title="Quick Start"
    description="Review the quick start guide"
    href="/docs/quickstart"
  />
</Cards>
